# Claude Code Configuration

Global configuration for Claude Code. This file is the authoritative source for how we work together across all projects.

## Core Principles

- Optimise for **readability**, **security**, **maintainability**, and **performance**
- Code should be clear enough for co-workers to understand
- Comment only when something is complex and needs context - never over-comment
- Be a good code-scout: leave code better than before, but don't do big refactors without planning

## Communication & Workflow

- Ask questions rather than making assumptions
- When encountering errors: try 2-3 alternative approaches first, then ask for guidance
- For feature requests: plan first → get approval → execute → verify against specs
- Provide brief progress updates while working
- When exploring unfamiliar codebases: figure it out first, then ask specific questions
- Correct me when I use incorrect terminology so I can learn

## Git & Commits

- Follow conventional commits
- Never add yourself as co-author or mention code was generated by Claude Code
- Commit early and often, but verify with me before committing

## Code Quality

- No tech_debt files or workaround files - fix issues directly
- Clean up after implementation: remove unneeded changes, files, or artifacts
- Don't over-optimise early - handle main errors/validations without going overboard
- Use existing logging/monitoring (like Sentry), add explicit logging only where errors are anticipated

### Readability Preferences

- **Avoid ternary operators** for complex logic - use explicit `if/else` instead
  - Simple assignment OK: `const x = condition ? a : b`
  - Nested/complex ternaries: always use `if/else` blocks
- **Use descriptive variable names in lambdas** when the body is complex
  - Short lambdas OK: `.map((f) => f.id)`
  - Complex lambdas: use `item`, `folder`, `doc`, etc. instead of single chars

## Testing

- Always ask before adding tests for new features
- Prefer unit tests; ask about integration tests when they might make sense
- TDD approach: write tests first, verify with me before implementation
- Verify we should proceed before implementing (I might change my mind)
- Avoid breaking changes - work around issues rather than adding migrations

## Dependencies & Tools

- Always ask before adding any new dependency
- Check if existing dependencies already solve the problem
- Prefer yarn, but also use npm and bun depending on the project
- Always ensure linting passes after implementing changes
- I use NVIM via `vi` - allow me to do manual edits when possible
- Don't use `sleep` for waiting (makes my screen go black)

## Naming Conventions

Follow project conventions first, but personal preferences are:

| Type | Convention |
|------|------------|
| File names | kebab-case |
| Components | PascalCase |
| Functions/variables | camelCase |
| Constants | UPPER_SNAKE_CASE |

Imports: follow project conventions, prefer TypeScript best practices with aliases.

## Architecture Preferences

- Centralise business logic in API, keep frontend simple
- Prefer pure functions and basic components
- Use existing state management; default to React's built-in state
- Use custom hooks instead of complex state libraries
- Feature-based folder structure with colocated files

## Tech Stack

- **Language:** TypeScript
- **Backend:** NestJS or Express
- **Frontend:** React or React Native
- **ORM:** TypeORM or Prisma
- **Database:** PostgreSQL (SQL-based RDS)

## Project Documentation Structure

Every project should have a `.claude/` directory with these files:

| File | Purpose | Auto-loaded? |
|------|---------|--------------|
| `CLAUDE.md` | Project-specific context and working agreements | ✅ Yes |
| `architecture.md` | System design, technical architecture | Via @import |
| `decisions-and-learnings.md` | Technical decisions, lessons learned, gotchas | Via @import |
| `planning.md` | Current work, task tracking, progress | Manual read |

**Templates:** `~/.claude/templates/`

| Template | Use for |
|----------|---------|
| `project-claude.md` | New project `.claude/CLAUDE.md` |
| `architecture.md` | New project `.claude/architecture.md` |
| `decisions-and-learnings.md` | New project `.claude/decisions-and-learnings.md` |
| `planning.md` | New task `.claude/planning.md` |

## Common Commands

```bash
npm run lint        # Run linting
npm run typecheck   # Run type checking
npm run test        # Run tests
npm run build       # Build the project
```

---

Project-specific CLAUDE.md files extend and customise these global patterns.
